# DataWise Desktop å¯è¡Œæ€§åˆ†æä¸å¼€å‘è®¡åˆ’

**åˆ†ææ—¥æœŸ**: 2025-11-13  
**åˆ†æå¸ˆ**: æŠ€æœ¯æ¶æ„ç»„  
**ç»“è®º**: âœ… **é¡¹ç›®å¯è¡Œï¼Œå»ºè®®è°ƒæ•´æ—¶é—´çº¿ä¸º 8 å‘¨**

---

## ä¸€ã€å¯è¡Œæ€§æ€»ç»“

### 1.1 æ¶æ„è®¾è®¡è¯„åˆ†ï¼š9/10 â­â­â­â­â­

**ä¼˜åŠ¿**ï¼š
- âœ… äº‹ä»¶é©±åŠ¨ + å‘½ä»¤æ¨¡å¼å®ç°å®Œç¾è§£è€¦
- âœ… Rust Workspace æ”¯æŒå¤š UI å¹¶è¡Œå¼€å‘
- âœ… DuckDB + Arrow æŠ€æœ¯æ ˆæˆç†Ÿç¨³å®š
- âœ… å¼‚æ­¥è®¾è®¡å¤©ç„¶æ”¯æŒé«˜å¹¶å‘

**æ”¹è¿›å»ºè®®**ï¼š
- âš ï¸ `EventKind::Finished(Vec<RecordBatch>)` åº”æ”¹ä¸ºæµå¼ä¼ è¾“æˆ–å¼•ç”¨ä¼ é€’
- âš ï¸ å¢åŠ  `bytes_processed` å­—æ®µåˆ° `Progress` äº‹ä»¶

### 1.2 æŠ€æœ¯æ ˆé£é™©è¯„ä¼°

| ç»„ä»¶ | é£é™©ç­‰çº§ | ç¼“è§£æªæ–½ |
|------|---------|----------|
| DuckDB 1.1 | ğŸŸ¢ ä½ | ç”Ÿäº§çº§å¼•æ“ï¼Œå·²æœ‰å¤§é‡æ¡ˆä¾‹ |
| Arrow 53 | ğŸŸ¢ ä½ | è¡Œä¸šæ ‡å‡†ï¼Œç”Ÿæ€å®Œå–„ |
| Tauri 2.x | ğŸŸ¡ ä¸­ | é”å®šå°ç‰ˆæœ¬ï¼Œå…³æ³¨ changelog |
| egui 0.29+ | ğŸŸ¡ ä¸­ | è™šæ‹Ÿæ»šåŠ¨éœ€è‡ªå®šä¹‰å®ç° |
| ratatui 0.28+ | ğŸŸ¢ ä½ | TUI é¢†åŸŸæœ€ä½³å®è·µ |

### 1.3 æ—¶é—´çº¿å¯è¡Œæ€§

**åŸè®¡åˆ’**: 4 å‘¨  
**è¯„ä¼°ç»“æœ**: âš ï¸ **è¿‡äºæ¿€è¿›**  
**å»ºè®®è°ƒæ•´**: **8 å‘¨**ï¼ˆè¯¦è§ç¬¬ä¸‰èŠ‚ï¼‰

---

## äºŒã€å…³é”®æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ

### 2.1 æ€§èƒ½æŒ‘æˆ˜

#### æŒ‘æˆ˜ 1: ç™¾ä¸‡è¡Œæ•°æ®è™šæ‹Ÿæ»šåŠ¨

**Tauri æ–¹æ¡ˆ**:
```rust
// ä½¿ç”¨ SharedArrayBuffer å‡å°‘åºåˆ—åŒ–å¼€é”€
#[tauri::command]
fn get_page(offset: usize, limit: usize) -> Vec<Row> {
    // ä»…ä¼ è¾“å¯è§è¡Œ
}
```

**egui æ–¹æ¡ˆ**:
```rust
// è‡ªå®šä¹‰ TableBuilder æ‡’åŠ è½½
TableBuilder::new(ui)
    .scroll_to_row(scroll_offset)
    .body(|mut body| {
        body.rows(row_height, visible_rows, |row_index, mut row| {
            // æŒ‰éœ€æ¸²æŸ“
        });
    });
```

#### æŒ‘æˆ˜ 2: å¤§æ–‡ä»¶å¯¼å…¥è¿›åº¦åé¦ˆ

**æ”¹è¿› protocol.rs**:
```rust
#[derive(Serialize, Deserialize, Clone, Debug)]
pub enum EventKind {
    Progress { 
        pct: u8,
        bytes_processed: u64,  // æ–°å¢
        total_bytes: u64,      // æ–°å¢
        eta_seconds: Option<u32>, // æ–°å¢
    },
    // ...
}
```

### 2.2 è·¨å¹³å°å…¼å®¹æ€§

**æ–‡ä»¶è·¯å¾„å¤„ç†**:
```toml
[dependencies]
dunce = "1.0"  # è§„èŒƒåŒ– Windows è·¯å¾„
```

**å­—ä½“å›é€€**:
```rust
// egui å­—ä½“é…ç½®
fonts.font_data.insert(
    "fallback".to_owned(),
    FontData::from_static(include_bytes!("../assets/NotoSansMono.ttf")),
);
```

### 2.3 å†…å­˜ç®¡ç†

**é—®é¢˜**: `Finished(Vec<RecordBatch>)` å¯èƒ½å¯¼è‡´å†…å­˜å³°å€¼

**è§£å†³æ–¹æ¡ˆ**:
```rust
// æ–¹æ¡ˆ A: ä½¿ç”¨ Arc å…±äº«æ‰€æœ‰æƒ
pub enum EventKind {
    Finished(Arc<Vec<RecordBatch>>),
    // ...
}

// æ–¹æ¡ˆ B: æµå¼ä¼ è¾“ï¼ˆæ¨èï¼‰
pub enum EventKind {
    BatchReady { batch_id: u64, row_count: usize },
    // UI é€šè¿‡ get_batch(batch_id) æŒ‰éœ€è·å–
}
```

---

## ä¸‰ã€è°ƒæ•´åçš„å¼€å‘è®¡åˆ’ï¼ˆ8 å‘¨ï¼‰

### Phase 0: é¡¹ç›®åˆå§‹åŒ–ï¼ˆWeek 1ï¼‰
- [x] åˆ›å»º Workspace ç»“æ„
- [x] åˆå§‹åŒ–å„ crate
- [x] é…ç½® CI/CDï¼ˆGitHub Actionsï¼‰
- [x] åˆ¶å®šå¼€å‘è§„èŒƒï¼ˆCONTRIBUTING.mdï¼‰

### Phase 1: Core åŸºç¡€è®¾æ–½ï¼ˆWeek 1-2ï¼‰
- [ ] å®šä¹‰ protocol.rsï¼ˆå«æ”¹è¿›çš„ Progress äº‹ä»¶ï¼‰
- [ ] é›†æˆ DuckDB
- [ ] å®ç° ExecuteSql
- [ ] å®ç°äº‹ä»¶å¹¿æ’­æœºåˆ¶
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•

**é‡Œç¨‹ç¢‘**: Core 0.1.0 - æ”¯æŒåŸºæœ¬ SQL æŸ¥è¯¢

### Phase 2: Core å®Œæ•´åŠŸèƒ½ï¼ˆWeek 3-4ï¼‰
- [ ] å®ç° CSV/Parquet å¯¼å…¥å™¨
- [ ] å®ç°å¯¼å‡ºåŠŸèƒ½
- [ ] å®ç°ä»»åŠ¡å–æ¶ˆæœºåˆ¶
- [ ] å®ç°è¿›åº¦æŠ¥å‘Š
- [ ] é›†æˆæµ‹è¯•ï¼ˆå¤§æ–‡ä»¶ã€å¹¶å‘ï¼‰

**é‡Œç¨‹ç¢‘**: Core 0.2.0 - å®Œæ•´å¯¼å…¥å¯¼å‡ºèƒ½åŠ›

### Phase 3: UI å¹¶è¡Œå¼€å‘ï¼ˆWeek 3-5ï¼‰

**Tauri å›¢é˜Ÿ**:
- [ ] åˆå§‹åŒ–é¡¹ç›®ï¼ˆReact + TypeScriptï¼‰
- [ ] é›†æˆ Monaco Editor
- [ ] å®ç° ag-grid è¡¨æ ¼
- [ ] å®ç°æ–‡ä»¶æ‹–æ”¾
- [ ] å®ç°è¿›åº¦æ˜¾ç¤º

**egui å›¢é˜Ÿ**:
- [ ] åˆå§‹åŒ–é¡¹ç›®
- [ ] å®ç°å¸ƒå±€ç³»ç»Ÿ
- [ ] å®ç°è™šæ‹Ÿæ»šåŠ¨è¡¨æ ¼
- [ ] å®ç°æ–‡ä»¶æ‹–æ”¾
- [ ] åµŒå…¥å­—ä½“èµ„æº

**tui å›¢é˜Ÿ**:
- [ ] åˆå§‹åŒ– ratatui é¡¹ç›®
- [ ] å®ç°ç»ˆç«¯å¸ƒå±€
- [ ] å®ç° SQL ç¼–è¾‘å™¨
- [ ] å®ç°è¡¨æ ¼ç»„ä»¶
- [ ] å®ç°å¿«æ·é”®

**é‡Œç¨‹ç¢‘**: ä¸‰ä¸ª UI çš„ MVP ç‰ˆæœ¬

### Phase 4: é›†æˆä¸ä¼˜åŒ–ï¼ˆWeek 6-7ï¼‰
- [ ] è·¨ UI é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼ˆ1GB CSVã€100ä¸‡è¡Œæ¸²æŸ“ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆæ ¹æ®åŸºå‡†ç»“æœï¼‰
- [ ] Bug ä¿®å¤
- [ ] è·¨å¹³å°æµ‹è¯•ï¼ˆWin/Mac/Linuxï¼‰

**é‡Œç¨‹ç¢‘**: æ¥å£é”å®š 1.0.0

### Phase 5: å‘å¸ƒå‡†å¤‡ï¼ˆWeek 8ï¼‰
- [ ] ç¼–å†™ç”¨æˆ·æ–‡æ¡£ï¼ˆREADMEã€æ•™ç¨‹ï¼‰
- [ ] ç”Ÿæˆ API æ–‡æ¡£ï¼ˆrustdocï¼‰
- [ ] é…ç½®è‡ªåŠ¨æ‰“åŒ…æµç¨‹
- [ ] ç”Ÿæˆ SHA256 æ ¡éªŒæ–‡ä»¶
- [ ] å‘å¸ƒ v1.0-beta

**é‡Œç¨‹ç¢‘**: å…¬å¼€ Beta ç‰ˆæœ¬

---

## å››ã€å›¢é˜Ÿåä½œå»ºè®®

### 4.1 æ¥å£å˜æ›´æµç¨‹

```mermaid
graph LR
    A[æå‡ºå˜æ›´ PR] --> B{æ”¹åŠ¨ protocol.rs?}
    B -->|æ˜¯| C[@æ‰€æœ‰ UI Owner]
    B -->|å¦| D[å¸¸è§„ Review]
    C --> E[è”åˆè¯„å®¡]
    E --> F{é€šè¿‡?}
    F -->|æ˜¯| G[åˆå¹¶ + å‡çº§ç‰ˆæœ¬]
    F -->|å¦| H[ä¿®æ”¹æ–¹æ¡ˆ]
```

### 4.2 Mock æ•°æ®ç­–ç•¥

**Core å›¢é˜Ÿæä¾›**:
```rust
// datawise-core/src/mock.rs
pub fn generate_test_data(rows: usize) -> Vec<RecordBatch> {
    // ç”Ÿæˆæµ‹è¯•æ•°æ®ä¾› UI å›¢é˜Ÿä½¿ç”¨
}
```

### 4.3 CI çŸ©é˜µ

```yaml
strategy:
  matrix:
    os: [ubuntu-latest, macos-latest, windows-latest]
    rust: [stable, nightly]
    ui: [tauri, egui, tui]
```

---

## äº”ã€é£é™©ç¼“è§£æ¸…å•

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ | è´Ÿè´£äºº |
|------|------|------|----------|--------|
| DuckDB ç»‘å®š Bug | ä½ | é«˜ | æå‰é›†æˆæµ‹è¯• + SQLite é™çº§æ–¹æ¡ˆ | Core å›¢é˜Ÿ |
| Tauri API å˜æ›´ | ä¸­ | ä¸­ | é”å®šç‰ˆæœ¬ `tauri = "=2.0.5"` | Tauri å›¢é˜Ÿ |
| æ¥å£é¢‘ç¹å˜æ›´ | é«˜ | é«˜ | ä¸¥æ ¼ PR æµç¨‹ + SemVer | æ¶æ„ç»„ |
| æ€§èƒ½ä¸è¾¾æ ‡ | ä¸­ | é«˜ | Week 6 åŸºå‡†æµ‹è¯• + ä¼˜åŒ–æ—¶é—´ | å…¨ä½“ |
| è·¨å¹³å°å…¼å®¹æ€§ | ä¸­ | ä¸­ | CI è¦†ç›– + æ‰‹åŠ¨æµ‹è¯• | QA |

---

## å…­ã€æˆåŠŸæ ‡å‡†

### 6.1 åŠŸèƒ½å®Œæ•´æ€§
- âœ… æ”¯æŒ CSV/Parquet å¯¼å…¥å¯¼å‡º
- âœ… æ”¯æŒ SQL æŸ¥è¯¢ï¼ˆDuckDB å…¨ç‰¹æ€§ï¼‰
- âœ… ä¸‰ä¸ª UI åŠŸèƒ½å¯¹ç­‰

### 6.2 æ€§èƒ½æŒ‡æ ‡
- âœ… 1GB CSV å¯¼å…¥ < 30s
- âœ… 100 ä¸‡è¡Œæ¸²æŸ“ 60fps
- âœ… æŸ¥è¯¢å“åº” < 100ms

### 6.3 è´¨é‡æŒ‡æ ‡
- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- âœ… é›†æˆæµ‹è¯•é€šè¿‡ç‡ 100%
- âœ… è·¨å¹³å°å…¼å®¹æ€§éªŒè¯

---

**æ‰¹å‡†ç­¾å­—**  
æ¶æ„ç»„ â˜‘  äº§å“ç»„ â˜  å„ UI å›¢é˜Ÿ â˜  
æ—¥æœŸ: 2025-11-13

